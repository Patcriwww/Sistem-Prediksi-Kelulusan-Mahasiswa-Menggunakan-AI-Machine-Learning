{% extends "base.html" %}
{% block title %}Login | AI Prediksi Kelulusan{% endblock %}
{% block content %}

<style>
  body { background:#f5f7fb; }
  .login-wrap{
    min-height: calc(100vh - 160px);
    display:flex;
    align-items:center;
  }
  .login-card{
    border: 0;
    border-radius: 18px;
    box-shadow: 0 18px 60px rgba(16,24,40,.10);
    overflow:hidden;
    background:#fff;
  }
  .side{
    background: linear-gradient(180deg, #f8fafc 0%, #ffffff 100%);
    border-right: 1px solid #eef2f6;
  }
  .brand-dot{
    width:10px;height:10px;border-radius:999px;background:#3b82f6;display:inline-block;
  }
  .muted { color:#667085; }
  .title { letter-spacing:.2px; }
  .chip{
    display:inline-flex;align-items:center;gap:.5rem;
    padding:.4rem .7rem;border-radius:999px;
    background:#f1f5ff;border:1px solid #e5edff;color:#1d4ed8;
    font-size:.85rem;
  }
  .form-control, .btn, .input-group-text { border-radius: 12px; }
  .input-group-text{ background:#f8fafc; }
  .btn-primary{
    background:#2563eb;border-color:#2563eb;
    font-weight:600;
    padding:.75rem .9rem;
  }
  .btn-primary:hover{ background:#1d4ed8;border-color:#1d4ed8; }
  .btn-outline-secondary{ border-color:#e5e7eb; }
  .mini-card{
    border:1px solid #eef2f6;border-radius:14px;
    background:#fbfcfe;padding:12px 14px;
  }
  .demo-btn{ border-radius:999px; }
  .divider{
    height:1px;background:#eef2f6;margin:16px 0;
  }
</style>

<div class="login-wrap">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-9 col-xl-8">
        <div class="card login-card">
          <div class="row g-0">

            <!-- LEFT: Info (kalem) -->
            <div class="col-md-5 side p-4 p-lg-5">
              <div class="d-flex align-items-center gap-2 mb-3">
                <span class="brand-dot"></span>
                <div class="fw-bold">AI Prediksi Kelulusan</div>
              </div>

              <div class="chip mb-3">ARaaS • Academic Risk as a Service</div>

              <h5 class="fw-bold title mb-2">Monitoring akademik berbasis AI</h5>
              <p class="muted mb-4">
                Prediksi kelulusan tepat waktu, klasifikasi risiko, dan rekomendasi intervensi untuk mahasiswa.
              </p>

              <div class="mini-card">
                <div class="fw-semibold mb-2">Role akses</div>
                <div class="muted small">
                  • Mahasiswa: input data & lihat hasil<br>
                  • Dosen: monitoring kelas & detail mahasiswa<br>
                  • Akademik: dashboard kampus, chart, export laporan
                </div>
              </div>

              <div class="divider"></div>

              <div class="muted small">
              </div>
            </div>

            <!-- RIGHT: Form -->
            <div class="col-md-7 p-4 p-lg-5">
              <div class="mb-3">
                <h4 class="fw-bold mb-1">Login</h4>
                <div class="muted">Masuk untuk mengakses dashboard sesuai peran</div>
              </div>

              {% if error %}
                <div class="alert alert-danger">{{ error }}</div>
              {% endif %}

              <form id="loginForm" method="post">
                <div class="mb-3">
                  <label class="form-label">Username</label>
                  <div class="input-group">
                    <span class="input-group-text">User</span>
                    <input class="form-control" name="username" placeholder="contoh: mhs01" required autocomplete="username">
                  </div>
                </div>

                <div class="mb-2">
                  <label class="form-label">Password</label>
                  <div class="input-group">
                    <span class="input-group-text">Pass</span>
                    <input id="pw" class="form-control" type="password" name="password" placeholder="••••••••" required autocomplete="current-password">
                    <button id="togglePw" class="btn btn-outline-secondary" type="button">Show</button>
                  </div>
                </div>

                <div class="d-flex align-items-center justify-content-between mb-4">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="remember">
                    <label class="form-check-label" for="remember">Remember me</label>
                  </div>
                  <a href="{{ url_for('auth.forgot_password') }}" class="small text-decoration-none">Lupa password?</a>
                </div>

                <button id="btnLogin" class="btn btn-primary w-100">Login</button>

                <div class="mini-card mt-3">
                  <div class="small muted mb-2">Akun demo (password: 123)</div>
                  <div class="d-flex flex-wrap gap-2">
                    <button class="btn btn-sm btn-outline-primary demo-btn" type="button" onclick="fillDemo('mhs01','123')">mhs01</button>
                    <button class="btn btn-sm btn-outline-primary demo-btn" type="button" onclick="fillDemo('mhs02','123')">mhs02</button>
                    <button class="btn btn-sm btn-outline-primary demo-btn" type="button" onclick="fillDemo('mhs03','123')">mhs03</button>
                    <button class="btn btn-sm btn-outline-primary demo-btn" type="button" onclick="fillDemo('mhs04','123')">mhs04</button>
                    <button class="btn btn-sm btn-outline-secondary demo-btn" type="button" onclick="fillDemo('dosen01','123')">dosen01</button>
                    <button class="btn btn-sm btn-outline-secondary demo-btn" type="button" onclick="fillDemo('admin01','123')">admin01</button>
                  </div>
                </div>

                <div class="text-center muted small mt-3">
                  Sistem Prediksi Kelulusan Mahasiswa • 2025
                </div>
              </form>

              <script>
                const pw = document.getElementById("pw");
                const togglePw = document.getElementById("togglePw");
                togglePw.addEventListener("click", () => {
                  const isPw = pw.type === "password";
                  pw.type = isPw ? "text" : "password";
                  togglePw.textContent = isPw ? "Hide" : "Show";
                });

                function fillDemo(u, p){
                  document.querySelector('input[name="username"]').value = u;
                  pw.value = p;
                  pw.focus();
                }

                const form = document.getElementById("loginForm");
                const btn = document.getElementById("btnLogin");
                form.addEventListener("submit", () => {
                  btn.disabled = true;
                  btn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Memproses...';
                });
              </script>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
